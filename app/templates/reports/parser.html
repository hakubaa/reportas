{% extends "base.html" %}

{% block title %} Parser {% endblock %}

{% block styles %}
{{ super() }}
<style>
    #report {
        height: 400px;
        overflow: scroll;
        border: 1px solid black;
    }
    #report-table {
        border-collapse: collapse;
        width: 100%;
        height: 100%;
    }

    #report-table tr,
    #report-table td 
    { 
        font-family: "Courier New", Courier, monospace;
        font-size: 0.9em;
        border: 1px solid black;
    }
    #report-table th {
        border: 1px solid black;
        padding: 5px 0px;
        text-align: center;
    }

    #report-table td.statement > select {
        width: 100%;
        /*border: 0px;*/
    }
    #report-table td.content {
        /*width: 600px;*/
    }
    #report-table td.content > input {
        width: 100%;
        border: 0px;
    }
    #report-table td.rowno,
    #report-table td.pageno,
    #report-table td.field
    {
        text-align: center;
    }
    td.pageno,
    td.statement
    {
        width: 5%;
    }
    td.field {
        width: 10%;
    }
    td.content {
        width: 80%;
    }
    .nls-style {
        background-color: lightblue;
    }
    .bls-style {
        background-color: lightgreen;
    }
    .cfs-style {
        background-color: lightcoral;
    }
</style>
{% endblock %}

{% block body %}
    {{ super() }}
    <div class="container" id="report_info">
        {% if company %}
            <p><a href="{{ url_for('main.company', isin=company.isin) }}", target="_blank">{{company.fullname}}</a></p>
            <p>Report for {{report.timerange}} months ended on {{report.timestamp.strftime('%Y-%m-%d')}}</p>
        {% else %}
            <p>Company not identified.</p>
        {% endif %}
    </div>
    
    <div class="container">
        <div id="report">
            <table id="report-table">
                <thead>
                    <tr>
                        <th></th>
                        <th>page#</th>
                        <th>field</th>
                        <th>content</th>
                    </tr>  
                </thead>
                <tbody>
                    {% for doc_row, page_no, page_row, content in report.rows %}
                        {% if page_no in report.nls_pages %}
                            <tr class="nls-style">
                        {% elif page_no in report.bls_pages %}
                            <tr class="bls-style">
                        {% elif page_no in report.cfs_pages %}
                            <tr class="cfs-style">
                        {% else %}
                            <tr>
                        {% endif %}
                            <td class="selector"><input type="checkbox"></td>
                            <td class="pageno">{{page_no}}</td>
                            <td class="field">{{ report.records_map.get(doc_row, None) }}</td>
                            <td class="content"><input type="text" value="{{content}}"></td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="container" id="finrecords">
        
    </div>
{% endblock %}